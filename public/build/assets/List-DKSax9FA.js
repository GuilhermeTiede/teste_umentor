import{_ as U}from"./AuthenticatedLayout-XtqKdYSs.js";import{D as z,x as r,k as B,E as A,l as q,G as D,o as _,f as w,a as u,w as x,H as E,I,c as L,J as V,t as j,Q as H,K as O,C as R,u as N,Z as M,b as v,j as X,d as G}from"./app-BcapX1JI.js";import"./ApplicationLogo-SH6BklNX.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const J=z.create({headers:{"X-Requested-With":"XMLHttpRequest"}}),K={key:0},Q={key:1},W={__name:"DataTable",props:{url:String,columns:Array,data:Array,pageSize:Number,rowsPerPageOptions:Array,checkboxSelection:Boolean},setup(P){const e=P,c=r(null),d=r(!1),b=r(e.data||[]),m=r(0),t=r({page:1,itemsPerPage:e.pageSize||25,sortBy:[],filters:[],showSelect:e.checkboxSelection||!1}),p=r(!!e.url),n=r([]);B(()=>e.checkboxSelection,a=>{t.value.showSelect=a},{immediate:!0}),B(()=>e.columns,a=>{n.value=a.map(l=>({title:l.headerName,key:l.field,sortable:l.sortable??!0}))},{immediate:!0}),B(t,()=>{p.value&&k()});const k=()=>{d.value=!0;const{page:a,itemsPerPage:l,sortBy:S,sortDesc:C}=t.value,o=e.columns.map((s,h)=>{let g={value:null,regex:!1,operator:"contains"};return{data:h,name:s.field,searchable:s.filterable??!0,orderable:s.sortable??!0,search:g}}),f=A.stringify({draw:1,columns:o,order:S.map((s,h)=>({dir:C[h]?"desc":"asc",column:o.findIndex(g=>g.name===s)})),start:(a-1)*l,length:l,search:{value:null,regex:!1}}),y=e.url.includes("?")?`${e.url}&${f}`:`${e.url}?${f}`;J.get(y).then(s=>{const h=s.data.data.map(g=>o.reduce((T,$)=>({...T,[$.name]:g[$.data]}),{}));b.value=h,m.value=s.data.recordsTotal}).catch(s=>{c.value=s}).finally(()=>{d.value=!1})},i=a=>{t.value={...t.value,page:a.page,itemsPerPage:a.itemsPerPage,sortBy:a.sortBy}};return q(()=>{p.value&&k()}),(a,l)=>{const S=D("v-data-table-server"),C=D("v-card");return _(),w("div",null,[u(C,null,{default:x(()=>[u(S,{headers:n.value,items:b.value,"items-per-page":t.value.itemsPerPage,"items-length":m.value,loading:d.value,options:t.value,"show-select":t.value.showSelect,"footer-props":{itemsPerPageOptions:P.rowsPerPageOptions},"onUpdate:options":i},E({_:2},[I(n.value,o=>({name:`item.${o.key}`,fn:x(({item:f})=>{var y;return[(y=e.columns.find(s=>s.field===o.key))!=null&&y.renderCell?(_(),w("span",K,[(_(),L(V(e.columns.find(s=>s.field===o.key).renderCell),{row:f},null,8,["row"]))])):(_(),w("span",Q,j(f[o.key]),1))]})}))]),1032,["headers","items","items-per-page","items-length","loading","options","show-select","footer-props"])]),_:1})])}}},Z={class:"flex justify-between items-center"},F={class:"py-12"},Y={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6"},ee={class:"p-4 sm:p-8 bg-white shadow sm:rounded-lg"},oe={__name:"List",setup(P){var p,n;const e=[{field:"id",headerName:"ID"},{field:"name",headerName:"Nome "},{field:"email",headerName:"E-mail"}],{props:c}=H(),d=r([...e]),b=r(O("users.index"));r(c.users||[]);const m=(p=c.flash)==null?void 0:p.success,t=(n=c.flash)==null?void 0:n.error;return q(()=>{m?R.success(m):t&&R.error(t)}),(k,i)=>(_(),w("div",null,[u(N(M),{title:"Dashboard"}),u(U,null,{header:x(()=>[v("div",Z,[i[1]||(i[1]=v("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Cadastrar Usuários",-1)),u(N(X),{href:N(O)("users.create"),class:"text-white bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg text-sm"},{default:x(()=>i[0]||(i[0]=[G(" Cadastrar Usuário ")])),_:1},8,["href"])])]),default:x(()=>[v("div",F,[v("div",Y,[v("div",ee,[u(W,{url:b.value,columns:d.value,pageSize:25,rowsPerPageOptions:[25,50,100]},null,8,["url","columns"])])])])]),_:1})]))}};export{oe as default};
